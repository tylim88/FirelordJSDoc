---
sidebar_position: 8
---

# Where And documentId()🍒

This section discuss how `where` and field path sentinel `documentId()` types works.

import { Image } from '@site/src/components/Image'

## No Autocomplete for Value 🐧

There is autocomplete for `where`'s field path and operation string parameter, however due to Typescript limitation there is no autocomplete for the value parameter.

FirelordJS will still make sure the value type is correct.

You can access the `MetaType` using **[index accessor](../guides/children_and_metatype#index-accessor-%EF%B8%8F)** to check what type you need.

## Dealing With Literal Types 🐧

When working with literal types, due of Typescript limitation, you need `const` assertion in order to infers the type correctly, no warning from FirelordJS.

<Image
	src="https://github.com/tylim88/FirelordJSDoc/blob/main/static/img/where1.png?raw=true"
	text={`const assertion is needed`}
/>

:::caution

You still need to assert `const` variable as `const`.

<Image
	src="https://github.com/tylim88/FirelordJSDoc/blob/main/static/img/where7.png?raw=true"
	text={`You still need to assert const variable as const`}
/>

:::

## Dealing With Empty Array ⚠️

<Image
	src="https://github.com/tylim88/FirelordJSDoc/blob/main/static/img/where8.png?raw=true"
	text={`FirelordJS forbid never[] but allow correctType[] even if it is empty`}
/>

FirelordJS forbid `never[]` to stop you from accidentally assign empty array(never[]) directly, small convenience.

However it is impossible to block empty array totally as long as the type is correct, FirelordJS handle this in runtime by replacing empty array with `['some long random string']`.

This prevents runtime exceptions while keeping the result intact without altering developer's intention.

:::caution

If you decides to revert back to the original Firestore API, please add logic to deal with the empty array.

:::

## documentId() 🕊️

When working with dield path sentinel `documentId()`, `const` assertion is needed for the same reason, however in this case FirelordJS warns you when you are not using `const` assertion.

<Image
	src="https://github.com/tylim88/FirelordJSDoc/blob/main/static/img/where2.png?raw=true"
	text={`FirelordJS warns you when you are not using const assertion.`}
/>

### Collection Reference 🕊️

When querying a collection by documentId(), you must provide a plain document ID, without any forward slash.

<Image
	src="https://github.com/tylim88/FirelordJSDoc/blob/main/static/img/where3.png?raw=true"
	text={`FirelordJS displays error mesagae in the hint if it detects any invalid character.`}
/>

### Collection Group 🕊️

When querying a collection group by documentId(), FirelorsJS rejects the value if the value is not a valid full document path.

<Image
	src="https://github.com/tylim88/FirelordJSDoc/blob/main/static/img/where4.png?raw=true"
	text={`FirelordJS displays error mesagae in the hint if it detects path is wrong.`}
/>

<Image
	src="https://github.com/tylim88/FirelordJSDoc/blob/main/static/img/where5.png?raw=true"
	text={`FirelordJS counts and compares the number of slash and displays it in the hint`}
/>

### With OrderBy 🦜

The field path of `documentId()` is `__name__`, this is how you use it with orderBy (for some reason you want to order document by Id).

<Image
	src="https://github.com/tylim88/FirelordJSDoc/blob/main/static/img/where6.png?raw=true"
	text={`Order by document Id`}
/>
